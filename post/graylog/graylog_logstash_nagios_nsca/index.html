<!doctype html><html class=no-js><head lang=en-us><meta charset=utf-8><meta name=viewport content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1"><meta http-equiv=x-ua-compatible content="IE=10"><title>Graylog2 - 3 - Logstash nagios_nsca - Pablo Estigarribia's docs</title><meta name=generator content="Hugo 0.83.1"><meta name=description content="Pablo Estigarribia's personal docs for sharing sysadmin and devops works"><link rel=canonical href=https://pablodav.github.io/post/graylog/graylog_logstash_nagios_nsca/><meta name=author content="pablodav"><meta property="og:url" content="https://pablodav.github.io/post/graylog/graylog_logstash_nagios_nsca/"><meta property="og:title" content="Pablo Estigarribia's docs"><meta name=apple-mobile-web-app-title content="Pablo Estigarribia's docs"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><link rel="shortcut icon" type=image/x-icon href=https://pablodav.github.io/images/favicon.ico><link rel=icon type=image/x-icon href=https://pablodav.github.io/images/favicon.ico><style>@font-face{font-family:icon;src:url(https://pablodav.github.io/fonts/icon.eot);src:url(https://pablodav.github.io/fonts/icon.eot)format('embedded-opentype'),url(https://pablodav.github.io/fonts/icon.woff)format('woff'),url(https://pablodav.github.io/fonts/icon.ttf)format('truetype'),url(https://pablodav.github.io/fonts/icon.svg)format('svg');font-weight:400;font-style:normal}</style><link rel=stylesheet href=https://pablodav.github.io/stylesheets/application.css><link rel=stylesheet href=https://pablodav.github.io/stylesheets/temporary.css><link rel=stylesheet href=https://pablodav.github.io/stylesheets/palettes.css><link rel=stylesheet href=https://pablodav.github.io/stylesheets/highlight/highlight.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+mono"><style>body,input{font-family:ubuntu,Helvetica,Arial,sans-serif}pre,code{font-family:ubuntu mono,courier new,courier,monospace}</style><script src=https://pablodav.github.io/javascripts/modernizr.js></script></head><body class="palette-primary-green palette-accent-teal"><div class=backdrop><div class=backdrop-paper></div></div><input class=toggle type=checkbox id=toggle-drawer>
<input class=toggle type=checkbox id=toggle-search>
<label class="toggle-button overlay" for=toggle-drawer></label><header class=header><nav aria-label=Header><div class="bar default"><div class="button button-menu" role=button aria-label=Menu><label class="toggle-button icon icon-menu" for=toggle-drawer><span></span></label></div><div class=stretch><div class=title>Graylog2 - 3 - Logstash nagios_nsca</div></div><div class="button button-twitter" role=button aria-label=Twitter><a href=https://twitter.com/p4blod4v title="@p4blod4v on Twitter" target=_blank class="toggle-button icon icon-twitter"></a></div><div class="button button-github" role=button aria-label=GitHub><a href=https://github.com/pablodav title="@pablodav on GitHub" target=_blank class="toggle-button icon icon-github"></a></div></div><div class="bar search"><div class="button button-close" role=button aria-label=Close><label class="toggle-button icon icon-back" for=toggle-search></label></div><div class=stretch><div class=field><input class=query type=text placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck></div></div><div class="button button-reset" role=button aria-label=Search><button class="toggle-button icon icon-close" id=reset-search></button></div></div></nav></header><main class=main><div class=drawer><nav aria-label=Navigation><a href=https://github.com/pablodav/pablodav.github.io class=project><div class=banner><div class=name><strong>Pablo Estigarribia's docs</strong><br>pablodav/pablodav.github.io</div></div></a><div class=scrollable><div class=wrapper><ul class=repo><li class=repo-download><a href=https://github.com/pablodav/pablodav.github.io/archive/master.zip target=_blank title=Download data-action=download><i class="icon icon-download"></i> Download</a></li><li class=repo-stars><a href=https://github.com/pablodav/pablodav.github.io/stargazers target=_blank title=Stargazers data-action=star><i class="icon icon-star"></i> Stars
<span class=count>&ndash;</span></a></li></ul><hr><div class=toc><ul><li><a title=License href=https://pablodav.github.io/license/>License</a></li><li><span class=section>Ansible</span><ul><a title="Ansible Vault ES" href=https://pablodav.github.io/es/post/ansible/ansible_help_vault/>Ansible Vault ES</a></ul></li><li><span class=section>Ansible_Win</span><ul><a title="Ansible win Update and Security patching" href=https://pablodav.github.io/post/ansible_win/ansible_win_updates_patch_security/>Ansible win Update and Security patching</a></ul></li><li><span class=section>Material</span><ul><a title="Graylog2 - 1 - with ansible" href=https://pablodav.github.io/post/graylog/graylog_ansible/>Graylog2 - 1 - with ansible</a>
<a title="Graylog2 - 2 - logstash input http" href=https://pablodav.github.io/post/graylog/logstash_input/>Graylog2 - 2 - logstash input http</a>
<a class=current title="Graylog2 - 3 - Logstash nagios_nsca" href=https://pablodav.github.io/post/graylog/graylog_logstash_nagios_nsca/>Graylog2 - 3 - Logstash nagios_nsca</a><ul id=scrollspy></ul><a title="Graylog2 - 4 Nagios Services checks" href=https://pablodav.github.io/post/graylog/graylog_nagios/>Graylog2 - 4 Nagios Services checks</a></ul></li></ul><hr><span class=section>The author</span><ul><li><a href=https://twitter.com/p4blod4v target=_blank title="@p4blod4v on Twitter">@p4blod4v on Twitter</a></li><li><a href=https://github.com/pablodav target=_blank title="@pablodav on GitHub">@pablodav on GitHub</a></li><li><a href=mailto:pablodav@gmail.com title="Email of pablodav@gmail.com">Contact via email</a></li></ul></div></div></div></nav></div><article class=article><div class=wrapper><h1>Graylog2 - 3 - Logstash nagios_nsca</h1><h2 id=introduction>Introduction</h2><p>Here we will explain howto add notifications to nagios using <strong>Graylog</strong> and <strong>logstash</strong>.</p><p>In this case we will send 2 notifications:</p><ul><li>from <strong>Graylog</strong> using <strong>Streams</strong> and <strong>commands plugin</strong>.</li><li>From <strong>Logstash</strong> using <strong><a href=https://www.elastic.co/guide/en/logstash/current/plugins-outputs-nagios_nsca.html>plugins-outpus-nagios-nsca</a></strong></li></ul><p><img src=https://pablodav.github.io/img/graylog_logstash_nagios_nsca.png alt=graylog_logstash_nagios_nsca.png></p><h2 id=requirements>Requirements</h2><p>Have read both articles:</p><ul><li><a href=https://pablodav.github.io/post/graylog/graylog_ansible/>Graylog_ansible</a></li><li><a href=https://pablodav.github.io/post/graylog/logstash_input/>Graylog_logstash_input</a></li></ul><p>We need also 2 new roles to have in our <code>ansible-control-machine</code>.</p><p>We will use <code>requirements.yml</code>, and follow same steps: <a href=https://pablodav.github.io/post/graylog/graylog_ansible/#installing-roles>Graylog_ansible_installing_roles</a></p><p>So add these lines:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>- <span style=color:#f92672>src</span>: <span style=color:#ae81ff>https://github.com/CoffeeITWorks/ansible_nagios_graylog2_nsca.git</span>
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>ansible_nagios_graylog2_nsca</span>

- <span style=color:#f92672>src</span>: <span style=color:#ae81ff>https://github.com/CoffeeITWorks/ansible_nagios_graylog2_nsca_config_nagios.git</span>
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>ansible_nagios_graylog2_nsca_config_nagios</span>
</code></pre></div><p>And install the roles with <code>ansible-galaxy install -r requirements.yml</code></p><h2 id=ansible-inventory>Ansible Inventory</h2><p>We will use same inventory as created at: at <a href=https://pablodav.github.io/post/graylog/graylog_ansible/#preparing-the-inventory>Graylog_ansible_inventory</a></p><h2 id=preparing-the-variables>Preparing the variables</h2><p>The folder was created during the preparatives at: <a href=https://pablodav.github.io/post/graylog/graylog_ansible/#preparing-the-variables>Graylog_ansible_variables</a></p><p>We will modify <code>group_vars/graylog2_servers/logstash_vars</code>:</p><p>Modify <code>logstash_custom_outputs</code> variable, so it will look like:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>
<span style=color:#f92672>logstash_custom_outputs</span>:

  - <span style=color:#f92672>output</span>: <span style=color:#e6db74>&#39;gelf&#39;</span>
    <span style=color:#f92672>lines</span>:
      - <span style=color:#e6db74>&#39;host =&gt; &#34;localhost&#34;&#39;</span>
      - <span style=color:#e6db74>&#39;port =&gt; &#34;12201&#34;&#39;</span>

  <span style=color:#75715e># https://www.elastic.co/guide/en/logstash/current/plugins-outputs-nagios_nsca.html</span>
  - <span style=color:#f92672>output</span>: <span style=color:#e6db74>&#39;nagios_nsca&#39;</span>
    <span style=color:#f92672>if_condition</span>: <span style=color:#e6db74>&#39;&#34;Resolved&#34; in [status]&#39;</span>
    <span style=color:#f92672>lines</span>:
      - <span style=color:#e6db74>&#39;host =&gt; &#34;{{ ansible_nagios_graylog_nagios_server }}&#34;&#39;</span>
      - <span style=color:#e6db74>&#39;nagios_service =&gt; &#34;LOGSTASH&#34;&#39;</span>
      - <span style=color:#e6db74>&#39;nagios_status =&gt; &#34;0&#34;&#39;</span>
      - <span style=color:#e6db74>&#39;nagios_host =&gt; &#34;{{ ansible_nagios_graylog_hostname }}&#34;&#39;</span>

  - <span style=color:#f92672>output</span>: <span style=color:#e6db74>&#39;nagios_nsca&#39;</span>
    <span style=color:#f92672>if_condition</span>: <span style=color:#e6db74>&#39;&#34;Activated&#34; in [status]&#39;</span>
    <span style=color:#f92672>lines</span>:
      - <span style=color:#e6db74>&#39;host =&gt; &#34;{{ ansible_nagios_graylog_nagios_server }}&#34;&#39;</span>  <span style=color:#75715e># This is the nagios server</span>
      - <span style=color:#e6db74>&#39;nagios_service =&gt; &#34;LOGSTASH&#34;&#39;</span>                        <span style=color:#75715e># This is the service to send status in nagios.</span>
      - <span style=color:#e6db74>&#39;nagios_status =&gt; &#34;2&#34;&#39;</span>                                <span style=color:#75715e># The status to send to the service.</span>
      - <span style=color:#e6db74>&#39;nagios_host =&gt; &#34;{{ ansible_nagios_graylog_hostname }}&#34;&#39;</span>  <span style=color:#75715e># This is the host to send status in nagios.</span>

</code></pre></div><p>As noticed we added 2 output <code>nagios_nsca</code>, with conditions (One for Activated and other for Resolved in <code>[status]</code>). As we have
filtered (transformed) the data to json, we can us the if condition. See <a href=https://pablodav.github.io/post/graylog/logstash_input/>Graylog_logstash_input</a>.</p><p>In this example the json data has <code>[status]</code> var to check, but you can also use without if condition to send nsca check always.</p><p>We have also <code>ansible_nagios_graylog_main_server</code> and <code>ansible_nagios_graylog_host</code> vars, you can define here the <code>host</code> and <code>nagios_host</code>.</p><p>We will define also file with these two vars:</p><p><code>group_vars/graylog2_servers/nagios_graylog</code>:</p><p>If you have different servers for testing and production you could put these variables on the specific <code>host_vars/grayloghostname</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>
---

<span style=color:#f92672>ansible_nagios_graylog_nagios_server</span>: <span style=color:#e6db74>&#39;YOURNAGIOSSERVER&#39;</span>

<span style=color:#75715e># This variable will be used by ansible_nagios_graylog2_nsca role.</span>
<span style=color:#75715e># Will create an script called  /usr/local/sbin/graylog2-alert.sh</span>
<span style=color:#75715e># This script is by default defined in var ansible_nagios_graylog_nsca_script, but you don&#39;t need to change it.</span>
<span style=color:#75715e># It&#39;s a list of nagios hosts to send the command nsca</span>
<span style=color:#f92672>ansible_nagios_graylog_nagios_servers</span>:
  - <span style=color:#e6db74>&#39;{{ ansible_nagios_graylog_nagios_server }}&#39;</span>

<span style=color:#75715e># The hostname that will be created in nagios to</span>
<span style=color:#75715e># setup nagios_services and then receive the alerts on these nagios_services</span>
<span style=color:#f92672>ansible_nagios_graylog_hostname</span>: <span style=color:#e6db74>&#39;YOURGRAYLOGHOSTNAME&#39;</span>


</code></pre></div><h2 id=preparing-variables-for-nagios_config>Preparing variables for nagios_config</h2><p>We will need to setup <code>inventory</code> with <code>nagios4_servers</code> group and add our nagios host here.</p><p>Then add file: <code>group_vars/nagios4_servers/nagios_graylog</code></p><p>If you have different servers for testing and production you could put some of these variables on the specific <code>host_vars/nagioshostname</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>ansible_nagios_graylog_setup_nagios_host</span>: <span style=color:#66d9ef>true</span>
<span style=color:#f92672>ansible_nagios_graylog_hostname</span>: <span style=color:#e6db74>&#39;YOURGRAYLOGHOSTNAME&#39;</span>  <span style=color:#75715e># Your grayloghostname to setup the nagios service</span>
<span style=color:#f92672>ansible_nagios_graylog_parents</span>: <span style=color:#e6db74>&#39;FRB_CLUSTER&#39;</span>
<span style=color:#f92672>ansible_nagios_graylog_address</span>: <span style=color:#e6db74>&#39;IP.ADD.RE.SS&#39;</span>  <span style=color:#75715e># Your graylog ip add to setup the nagios host</span>
<span style=color:#f92672>ansible_nagios_graylog_template</span>: <span style=color:#e6db74>&#39;servers_linux_template&#39;</span>  <span style=color:#75715e># Change it to your own template or use generic-service</span>

<span style=color:#75715e># nagios configuration (optional settings):</span>
<span style=color:#f92672>ansible_nagios_graylog_setup_nagios_service</span>: <span style=color:#66d9ef>true</span>

<span style=color:#75715e># Nagios Service for each streams to configure:</span>
<span style=color:#f92672>ansible_nagios_graylog_nagios_streams</span>:

  - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;Graylog2-Azure_streams&#34;</span>
    <span style=color:#f92672>contact_group</span>: <span style=color:#e6db74>&#34;Graylog2-Azure_streams&#34;</span>

  - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;LOGSTASH&#34;</span>
    <span style=color:#f92672>contact_group</span>: <span style=color:#e6db74>&#34;Graylog2-Azure_streams&#34;</span>

<span style=color:#75715e># Nagios contact groups for each streams:</span>
<span style=color:#f92672>ansible_nagios_graylog_nagios_streams_contactgroups</span>:

  - <span style=color:#f92672>contact_group</span>: <span style=color:#e6db74>&#34;Graylog2-Azure_streams&#34;</span>
    <span style=color:#f92672>members</span>: <span style=color:#e6db74>&#34;nagiosadmin&#34;</span>

<span style=color:#75715e># nagios configuration options:</span>
<span style=color:#f92672>nagios_etc</span>: <span style=color:#e6db74>&#39;/usr/local/nagios/etc&#39;</span>
<span style=color:#75715e># Where we will add the nagios configuration</span>
<span style=color:#f92672>nagios_config_cfg_dir</span>: <span style=color:#e6db74>&#34;{{ nagios_etc }}/conf.d&#34;</span>

</code></pre></div><h2 id=preparing-the-playbook-to-run-the-roles>Preparing the playbook to run the roles</h2><p>Here we will add to <code>roles.graylog2.yml</code> as examplained at: <a href=https://pablodav.github.io/post/graylog/graylog_ansible/#preparing-the-playbook-to-run-the-roles>Graylog_ansible_playbook</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>
- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Apply nagios_nsca for graylog2 servers</span>
  <span style=color:#f92672>hosts</span>: <span style=color:#ae81ff>graylog2_servers</span>
  <span style=color:#f92672>become</span>: <span style=color:#66d9ef>yes</span>
  <span style=color:#75715e># environment: &#34;{{ proxy_env }}&#34;</span>
  <span style=color:#f92672>roles</span>:

    - <span style=color:#f92672>role</span>: <span style=color:#ae81ff>ansible_nagios_graylog2_nsca</span>
      <span style=color:#f92672>tags</span>:
        - <span style=color:#ae81ff>role::ansible_nagios_graylog2_nsca</span>
        - <span style=color:#ae81ff>graylog2_servers</span>


- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Config nagios hosts service and host for graylog nsca stream services</span>
  <span style=color:#f92672>hosts</span>: <span style=color:#ae81ff>nagios4_servers</span>
  <span style=color:#f92672>become</span>: <span style=color:#66d9ef>yes</span>
  <span style=color:#75715e># environment: &#34;{{ proxy_env }}&#34;</span>
  <span style=color:#f92672>roles</span>:

    - <span style=color:#f92672>role</span>: <span style=color:#ae81ff>ansible_nagios_graylog2_nsca_config_nagios</span>
      <span style=color:#f92672>tags</span>:
        - <span style=color:#ae81ff>role::ansible_nagios_graylog2_nsca</span>
        - <span style=color:#ae81ff>role::ansible_nagios_graylog2_nsca_config_nagios</span>

</code></pre></div><h2 id=run-the-playbook>Run the playbook</h2><p>use same steps as described in: <a href=https://pablodav.github.io/post/graylog/graylog_ansible/#run-the-playbook>Graylog_ansible_run</a></p><p>Or run only logstash role calling with tag:</p><pre><code>ansible-playbook -i inventory roles.graylog2.yml --limit graylog2_servers -u user -k -K --become --tags
</code></pre><h2 id=what-we-have-done>What we have done</h2><ul><li>We have modified <strong>logstash</strong> vars, now we have two outputs sending nsca message to nagios service.</li><li>We have added role: <strong><a href=https://github.com/CoffeeITWorks/ansible_nagios_graylog2_nsca_config_nagios>ansible_nagios_graylog2_nsca_config_nagios</a></strong>.
** It will create our configuration in nagios.</li><li>We have added role: **<a href=https://github.com/CoffeeITWorks/ansible_nagios_graylog2_nsca>ansible_nagios_graylog2_nsca</a>
** It will add script: /usr/local/sbin/graylog2-alert.sh
** Also will setup configure <a href=ttps://github.com/nksft/graylog2-plugin-exec>graylog2-plugin-exec</a></li></ul><p>You can use your own nagios config to setup the host and server, then not need to use ansible_nagios_graylog2_nsca_config_nagios role if
you don&rsquo;t like it. But using this role will make things faster.</p><h2 id=configure-graylog-for-exec>Configure graylog for exec</h2><p>Now logstash is sending alerts, but we need to setup Graylog <strong>Alerts</strong> to use <strong>Exec callback plugin</strong></p><p>Checkout doc: <a href=https://github.com/nksft/graylog2-plugin-exec#usage>https://github.com/nksft/graylog2-plugin-exec#usage</a></p><p>First create a <strong><a href=http://docs.graylog.org/en/stable/pages/streams.html>Stream</a></strong></p><p>I will create 2 streams for Azure messages:</p><p><img src=https://pablodav.github.io/img/graylog_streams_azure_activated.png alt=graylog_streams_azure_activated></p><p>And add rule for it:</p><p><img src=https://pablodav.github.io/img/graylog_streams_azure_activated_rules.png alt=graylog_streams_azure_activated_rules.png></p><p>Now we will create **<a href=http://docs.graylog.org/en/stable/pages/getting_started/stream_alerts.html>Graylog_alert</a> For our stream</p><p>create new alert condition like:</p><p><img src=https://pablodav.github.io/img/graylog_new_alert_condition.png alt=graylog_new_alert_condition.png></p><p>Then add Notifications as <strong>Exec callback plugins</strong></p><p><img src=https://pablodav.github.io/img/graylog_new_notification.png alt=/img/graylog_new_notification.png></p><p>Add to your notification command:</p><ul><li><strong>Title:</strong> <code>Activated Graylog2-Azure-streams</code></li><li><strong>Command:</strong> <code>/usr/local/sbin/graylog2-alert.sh "Graylog2-Azure_streams http://YOURGRAYLOGIP/streams/589c62dedf4b0011fc1232e8/search"</code></li></ul><p>Where <code>Graylog2-Azure_streams</code> is the service name on nagios. And second parameter is a message to put in the check</p><p><code>589c62dedf4b0011fc1232e8</code> is the id for your stream.</p><p>You will then have and will be able to test directly from graylog:</p><p><img src=https://pablodav.github.io/img/graylog_notification_commands.png alt=/img/graylog_notification_commands.png></p><p>That&rsquo;s it.</p><p>Now you can add many streams and more nagios services for each of your streams with your own settings.</p><p>These examples are done with Azure alerts, but they apply to any other kind of alert.</p><aside class=copyright role=note>&copy; 2021 Released under the MIT license with content licensed with CC BY &ndash;
Documentation built with
<a href=https://www.gohugo.io target=_blank>Hugo</a>
using the
<a href=http://github.com/digitalcraftsman/hugo-material-docs target=_blank>Material</a> theme.</aside><footer class=footer><nav class=pagination aria-label=Footer><div class=previous><a href=https://pablodav.github.io/post/graylog/logstash_input/ title="Graylog2 - 2 - logstash input http"><span class=direction>Previous</span><div class=page><div class="button button-previous" role=button aria-label=Previous><i class="icon icon-back"></i></div><div class=stretch><div class=title>Graylog2 - 2 - logstash input http</div></div></div></a></div><div class=next><a href=https://pablodav.github.io/post/graylog/graylog_nagios/ title="Graylog2 - 4 Nagios Services checks"><span class=direction>Next</span><div class=page><div class=stretch><div class=title>Graylog2 - 4 Nagios Services checks</div></div><div class="button button-next" role=button aria-label=Next><i class="icon icon-forward"></i></div></div></a></div></nav></footer></div></article><div class=results role=status aria-live=polite><div class=scrollable><div class=wrapper><div class=meta></div><div class=list></div></div></div></div></main><script>var base_url='https://pablodav.github.io/',repo_id='pablodav/pablodav.github.io'</script><script src=https://pablodav.github.io/javascripts/application.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js></script><script>var headers=document.getElementsByTagName("h2"),scrollspy=document.getElementById('scrollspy'),i,li,a;if(scrollspy){if(headers.length>0)for(i=0;i<headers.length;i++)li=document.createElement("li"),li.setAttribute("class","anchor"),a=document.createElement("a"),a.setAttribute("href","#"+headers[i].id),a.setAttribute("title",headers[i].innerHTML),a.innerHTML=headers[i].innerHTML,li.appendChild(a),scrollspy.appendChild(li);else scrollspy.parentElement.removeChild(scrollspy);headers=document.querySelectorAll("h1, h2, h3, h4, h5, h6");for(i=0;i<headers.length;i++)a=document.createElement("a"),a.setAttribute("class","headerlink"),a.setAttribute("href","#"+headers[i].id),a.setAttribute("title","Permanent link"),a.innerHTML="#",headers[i].appendChild(a)}</script><script>var buttons,query;(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-93334116-1','auto'),ga('set','anonymizeIp',!0),ga('send','pageview'),buttons=document.querySelectorAll('a'),Array.prototype.map.call(buttons,function(a){a.host!=document.location.host&&a.addEventListener('click',function(){var b=a.getAttribute('data-action')||'follow';ga('send','event','outbound',b,a.href)})}),query=document.querySelector('.query'),query.addEventListener('blur',function(){if(this.value){var a=document.location.pathname;ga('send','pageview',a+'?q='+this.value)}})</script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script></body></html>